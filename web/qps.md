[toc]

# 一、概念

**QPS**：(Queries Per Second 每秒查询率)，是对一个特定的查询服务器在规定时间内所处理流量多少的衡量标准。

**TPS：**(Transactions Per Second 每秒事务数)，它是软件测试结果的测量单位。

一个事务是指一个客户机向服务器发送请求然后服务器做出反应的过程。客户机在发送请求时开始计时，收到服务器响应后结束计时，以此来计算使用的时间和完成的事务个数。

每个事务包括下面三个过程：

1、用户请求服务器

2、服务器自己的内部查询等处理

3、服务器返回给用户



**qps与tps的不同点**：

QPS基本类似于TPS，但是不同的是，对于一个页面的一次访问，形成一个TPS；但一次页面请求，可能产生多次对服务器的请求，服务器对这些请求，就可计入QPS之中。如果是对一个接口（单场景）压测，且这个接口内部不会再去请求其它接口，那么TPS等于QPS；



**PV** (page view 页面浏览量)
用户每一次对网站中的每个页面访问均被记录1次。用户对同一页面的多次刷新，访问量累计。

**UV** (Unique visitor 独立访客)
通过客户端的cookies实现。即同一页面，客户端多次点击只计算一次，访问量不累计。





# 二、相关估算

QPS = 并发量 / 平均响应时间

原理：每天80%的访问集中在20%的时间里，这20%时间叫做峰值时间。

公式：( 总PV数 * 80% ) / ( 每天秒数 * 20% ) = 峰值时间每秒请求数(QPS) 。

机器：峰值时间每秒QPS / 单台机器的QPS = 需要的机器 。



根据以上计算关系，我们来预估下单日访问量在 1000W 需要多大的QPS来支持：
峰值时间qps = (1000w * 0.8) / (24 * 3600 * 0.2) = 462.9
根据压力测试的反馈，单台机子的QPS是多少，利用以上结果就可以算出需要几台机器；

